<div class="forgot-password-modal">
  <!-- Header -->
  <div class="modal-header">
    <div class="header-content">
      <mat-icon class="header-icon">lock_reset</mat-icon>
      <div class="header-text">
        <h2>Mot de passe oublié</h2>
        <p *ngIf="!emailSent">Saisissez votre adresse e-mail pour recevoir un lien de réinitialisation</p>
        <p *ngIf="emailSent" class="success-text">
          <mat-icon>check_circle</mat-icon>
          E-mail envoyé avec succès !
        </p>
      </div>
    </div>
    <button mat-icon-button class="close-btn" (click)="onClose()" matTooltip="Fermer">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Body -->
  <div class="modal-body">
    <!-- Formulaire -->
    <div *ngIf="!emailSent" class="form-section">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Adresse e-mail</mat-label>
          <input 
            matInput 
            type="email" 
            formControlName="email" 
            placeholder="votre.email@exemple.com"
            autocomplete="email">
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('required')">
            L'adresse e-mail est obligatoire
          </mat-error>
          <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('email')">
            Veuillez saisir une adresse e-mail valide
          </mat-error>
        </mat-form-field>

        <div class="modal-actions">
          <button 
            mat-button 
            type="button" 
            class="cancel-btn"
            (click)="onClose()"
            [disabled]="isLoading">
            Annuler
          </button>
          <button 
            mat-raised-button 
            color="primary" 
            type="submit" 
            class="submit-btn"
            [disabled]="!forgotPasswordForm.valid || isLoading">
            <mat-spinner *ngIf="isLoading" diameter="20" class="spinner"></mat-spinner>
            <span *ngIf="!isLoading">
              <mat-icon>send</mat-icon>
              Envoyer le lien
            </span>
          </button>
        </div>
      </form>
    </div>

    <!-- Message de succès -->
    <div *ngIf="emailSent" class="success-section">
      <div class="success-content">
        <mat-icon class="success-icon">mark_email_read</mat-icon>
        <h3>Vérifiez votre boîte e-mail</h3>
        <p>Nous avons envoyé un lien de réinitialisation à votre adresse e-mail.</p>
        <p class="note">Le lien est valide pendant 1 heure.</p>
        
        <button 
          mat-raised-button 
          color="primary" 
          class="close-success-btn"
          (click)="onClose()">
          <mat-icon>check</mat-icon>
          Compris
        </button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="modal-footer" *ngIf="!emailSent">
    <p class="footer-text">
      <mat-icon class="info-icon">info</mat-icon>
      Si vous n'avez pas reçu l'e-mail, vérifiez votre dossier spam
    </p>
  </div>
</div>
